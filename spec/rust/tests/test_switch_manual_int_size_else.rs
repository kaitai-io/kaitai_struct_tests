// Autogenerated from KST: please remove this line if doing any edits by hand!

use kaitai::{BytesReader, KStruct, KStructUnit};
use kaitai_test::switch_manual_int_size_else::SwitchManualIntSizeElse;
use std::fs;

#[test]
fn test_switch_manual_int_size_else() {
    let data = fs::read("../../src/switch_tlv.bin").expect("Unable to read data.");
    let reader = BytesReader::new(&data[..]);
    let r = SwitchManualIntSizeElse::default().read(&reader, None, KStructUnit::parent_stack()).unwrap();
    // assert_eq!(r.chunks.len(), 4);
    // assert_eq!(r.chunks[0].code, 17);
    // assert_eq!(r.chunks[0].body.title, "Stuff");
    // assert_eq!(r.chunks[0].body.author, "Me");
    // assert_eq!(r.chunks[1].code, 34);
    // assert_eq!(r.chunks[1].body.entries, ["AAAA", "BBBB", "CCCC"]);
    // assert_eq!(r.chunks[2].code, 51);
    // assert_eq!(r.chunks[2].body.rest, vec!([0x10, 0x20, 0x30, 0x40, 0x50, 0x60, 0x70, 0x80]));
    // assert_eq!(r.chunks[3].code, 255);
    // assert_eq!(r.chunks[3].body.rest, vec!([]));
}
